
<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <meta charset="UTF-8">
    <title>Order </title>
    <div th:replace="script.html"></div>

</head>
<body >
<!--Header Section-->
<div th:replace="header.html"></div>
<div class="row col-12">
    <div th:replace="sidebar.html"></div>
    <div class="col-10">
        <table class="table-striped   shadow m-3 p-3" >
            <thead>
            <th>OrderId</th>
            <th>Customer</th>
            <th>Product Names</th>
            <th>Shipping Address</th>
            <th>Order Date</th>
            <th>Total</th>
            <th>Action</th>
            </thead>
            <tbody>
            <th:block th:each="order:${orders}">
                <tr>
                    <td>[[${order.orderId}]]</td>
                    <td>[[${order.userName}]]</td>
                    <td th:text="${#strings.substring(order.productNames,1,#strings.length(order.productNames)-1)}"></td>
                    <td>[[${order.shippingAddress}]],[[${order.country}]], [[${order.state}]] ,[[${order.zip}]]</td>
                    <td th:text="${#temporals.format(order.orderDate, 'dd-MM-yyyy HH:mm')}">30-12-2021 23:59</td>
                    <td>[[${order.grandTotal}]]</td>
                    <td>
                        <a th:href="@{\billGenerator(orderId=${order.orderId})}"  type="button" class="btn btn-light" /><i class="fa fa-eye " ></i>
<!--                        <button type="button"    th:data-order="(${order.orderId})" id="view-order"  class="btn btn-light" > <i class="fa fa-eye "  ></i></button>-->
                    </td>
                </tr>

            </th:block>
            </tbody>
        </table>
    </div>
</div>
</div>
<!-- Modal -->
<div class="modal fade" id="viewBillModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel_U"> View Bill</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <iframe src="http://localhost:8080/" width="100%" height="400px" name="myIframe" id="myIframe">
                </iframe>

            </div>
        </div>
    </div>
</div>
</body>
<script>

<!--This function is used to view bills-->
$(document).on('click','#view-order' ,function(){
  $('#viewBillModal').modal('show')
});
</script>
</html>